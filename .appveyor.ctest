set(CTEST_SITE "Appveyor CI")

string(SUBSTRING "$ENV{APPVEYOR_REPO_COMMIT}" 0 7 COMMIT_ID)
set(CTEST_BUILD_NAME "$ENV{APPVEYOR_BUILD_NUMBER}-${COMMIT_ID}")

set(CTEST_SOURCE_DIRECTORY ".")
set(CTEST_BINARY_DIRECTORY "${CTEST_SOURCE_DIRECTORY}/build")

set(CTEST_CMAKE_GENERATOR "Visual Studio 14 2015 Win64")
set(CTEST_BUILD_CONFIGURATION "$ENV{CMAKE_BUILD_TYPE}")
set(CTEST_CONFIGURATION_TYPE "Debug")

ctest_start(Continuous)
ctest_configure()
ctest_build()
ctest_test()
ctest_submit()
